# R study^2025.7.25^
## R日期时间~study~
### R 日期和日期时间类型
R 日期可以保存为 Date 类型，一般用整数保存，数值为从 1970-1-1经过的天数
基础的 R 用 `as.Date()、as.POSIXct()` 等函数生成日期型和日期时间型，R 扩展包 lubridate 提供了多个方便函数，可以更容易地生成、转换、管理日期型和日期时间型数据
```r
library(lubridate)
lubridate::today()
[1] "2025-07-26"
lubridate::now()
[1] "2025-07-26 00:18:15 CST"
```

> 结果显示中出现的 CST 是**时区**，这里使用了操作系统提供的当前时区。CST **不是**一个含义清晰的**时区**，在不同国家对应不同的时区，在中国代表中国标准时间（北京时间）

用 `lubridate::ymd(), lubridate::mdy(), lubridate::dmy()` 将字符型向量转换为日期型向量(year,month,day)
```r
ymd(c("1998-3-10", "2018-01-17", "18-1-17"))
## [1] "1998-03-10" "2018-01-17" "2018-01-17"
mdy(c("3-10-1998", "01-17-2018"))
## [1] "1998-03-10" "2018-01-17"
dmy(c("10-3-1998", "17-01-2018"))
## [1] "1998-03-10" "2018-01-17"
```
lubridate 包的 ymd、mdy、dmy 等函数添加 hms、hm、h 等后缀，可以用于将**字符串**转换成**日期时间**
```r
ymd_hms("1998-03-16 13:15:45")
## [1] "1998-03-16 13:15:45 UTC"
```
---
### 时区和时区转换
UTC 是时区，UTC 是协调世界时 (Universal Time Coordinated) 英文缩写，是由国际无线电咨询委员会规定和推荐, 并由国际时间局 (BIH) 负责保持的以秒为基础的时间标度
UTC 相当于本初子午线(即经度 0 度) 上的平均太阳时，过去曾用格林威治平均时 (GMT) 来表示。北京时间比 UTC 时间早(快)8 小时
当天UTC零点=当天北京8：00

在 `Date()、as.DateTime()、ymd()` 等函数中，可以用 tz= 指定时区，比如北京时间可指定为 `tz="Etc/GMT-8"`或 `tz="Asia/Shanghai"`
为了将某个时间转换到指定的时区，而不改变真正的时间，用 `with_tz()` 函数
```r
with_tz(ymd_hms(c("1998-03-16 13:15:45",
"2023-03-14 10:11:12"),
tz="Asia/Shanghai"), tzone="UTC")
```
<!--stackedit_data:
eyJoaXN0b3J5IjpbLTE0ODk2MjgyOTUsMTgxMTg0NTEzNl19
-->